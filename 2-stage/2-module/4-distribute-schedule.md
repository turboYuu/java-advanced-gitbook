> 第四部分 分布式调度问题

调度（定时任务），分布式调度（在分布式集群环境下的定时任务）

[elastic-job](https://gitee.com/elasticjob/elastic-job) 当当网开源的分布式调度框架

# 1 定时任务的场景

定时任务形式：每隔一定时间/特定某一时刻执行。

# 2 什么是分布式调度

什么是分布式任务调度？有两层含义

1. 运行在分布式集群环境下的调度任务（同一个定时任务程序部署多分，只应该有一个定时任务在执行）
2. 分布式调度 ----> 定时任务的分布式 ----> 定时任务的拆分（即为把一个大的作业任务拆分为多个小的作业任务，同时执行）



# 3 定时任务与消息队列的区别

- 共同点

  - 异步处理

    比如注册、下单事件

  - 应用解耦

    不管定时任务作业还是 MQ 都可以作为两个应用之间的齿轮实现应用解耦，这个齿轮可以中转数据，当然单体服务不需要考虑这些，服务拆分的时候往往都会考虑。

  - 流量削峰

- 本质不同

  **定时任务作业是时间驱动，而 MQ 是事件驱动；**

  时间驱动是不可替代的，比如金融系统每日的利息结算，不是说利息来一条（利息到来事件）就算一下，而往往是通过定时任务批量计算；

  所以，定时任务作业更倾向于批处理，MQ倾向于逐条处理；

  

# 4 定时任务的实现方式

定时任务的实现方式有多种。早期没有定时任务框架的时候，我们会使用 JDK 中的 Timer 机制的多线程机制（Runnable + 线程休眠）来实现定时 或者 间隔一段时间 执行某一段程序；后来有了定时任务框架，比如大名鼎鼎的 Quartz 任务调度框架，使用时间表达式（包括：秒、分、时、日、周、年）配置某一个任务什么时间去执行：



# 5 分布式调度框架 Elastic-Job

## 5.1 Elastic-Job 介绍

## 5.2 Elastic-Job-Lite 应用

## 5.3 Elastic-Job-Lite 轻量级去中心化的特点

## 5.4 任务分片

## 5.5 弹性扩容

